# [什么是路由？| IP 路由](https://www.cloudflare.com/zh-cn/learning/network-layer/what-is-routing/)

- [什么是路由？| IP 路由](#什么是路由-ip-路由)
  - [什么是路由？](#什么是路由)
  - [路由如何工作？](#路由如何工作)
  - [主要的路由协议是什么？](#主要的路由协议是什么)
  - [什么是路由器？](#什么是路由器)

## 什么是路由？

网络路由是选择一个或多个网络上的路径的过程。

## 路由如何工作？

路由器通过参考内部路由表来决定如何沿网络路径路由数据包。路由表记录了数据包应到达路由器负责的每个目的地的路径。类似于列车时刻表，乘客会查阅时刻表以决定搭乘哪趟列车。路由表也是如此，但是用于网络路径而不是列车。

路由器以下列方式工作：路由器接收到数据包时，会读取数据包的标头以查看其预期的目的地，这种方式类似于列车票务员检查乘客的车票以确定他们应该乘坐的列车。然后，根据路由表中的信息确定将数据包路由到何处。

路由器以每秒数百万次的速度处理数百万个数据包。当数据包到达其目的地时，它可能会被不同的路由器路由多次。

路由表可以是静态的，也可以是动态的。静态路由表不变化。网络管理员手动设置静态路由表。除非管理员手动更新这些表，否则，路由表完全可以确定数据包在网络上的路由。

动态路由表会自动更新。动态路由器使用各种路由协议（请参阅下文）来确定最短和最快的路径。它们还根据数据包到达目的地所需的时间做出决定 - 类似于 Google Maps、Waze 和其他 GPS 服务根据过去的驾驶性能和当前的驾驶条件确定最佳驾驶路线的方式。

动态路由需要更多的计算能力，这就是为什么较小的网络可能依赖静态路由的原因。但是对于中型和大型网络，动态路由要高效得多。

## 主要的路由协议是什么？

在网络中，协议是格式化数据的标准化方法，因此任何连接的计算机都可以理解数据。路由协议是用于标识或通知网络路径的协议。

以下协议可帮助数据包在 Internet 上找到自己的路线：

**IP**：Internet 协议（IP）明确每个数据包的起点和目的地。路由器检查每个数据包的 IP 标头，以确定将其发送到何处。

**BGP**：[边界网关协议（BGP）](https://www.cloudflare.com/zh-cn/learning/security/glossary/what-is-bgp)路由协议用于通知哪些网络控制哪些 [IP 地址](https://www.cloudflare.com/zh-cn/learning/dns/glossary/what-is-my-ip-address)以及哪些网络相互连接。（发出这些 BGP 通知的大型网络称为[自治系统](https://www.cloudflare.com/zh-cn/learning/network-layer/what-is-an-autonomous-system) 。）BGP 是一种动态路由协议。

以下协议在 AS 中路由数据包：

**OSPF**：网络路由器通常使用开放式最短路径优先（OSPF）协议来动态识别最快和最短的可用路由，以将数据包发送到目的地。

**RIP**：路由信息协议（RIP）使用“跃点计数”来查找从一个网络到另一网络的最短路径，其中“跃点计数”表示数据包在途中必须经过的路由器数量。（当数据包从一个网络到达另一个网络时，这种情况称为“跃点”。）

其他内部路由协议包括 EIGRP（增强型内部网关路由协议，主要用于 Cisco 路由器）和 IS-IS（中间系统到中间系统）。

## 什么是路由器？

路由器是一种网络硬件，负责将数据包转发到目的地。路由器连接到两个或多个 IP 网络或子网，并根据需要在它们之间传递数据包。路由器在家庭和办公室中用于建立本地网络连接。功能更强大的路由器在整个 Internet 上运行，从而帮助数据包到达目的地。
